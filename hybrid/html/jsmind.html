<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>拓扑图</title>
		<script type="text/javascript" src="https://js.cdn.aliyun.dcloud.net.cn/dev/uni-app/uni.webview.1.5.2.js"></script>
		<link rel="stylesheet" href="./css/jsmind.css">
		<style>
			html {
				width: 100%;
				height: 100vh;
			}

			body {
				margin: 0;
				height: 100%;
			}

			#jsmind_container {
				width: 100vw;
				height: 100%;
				/* background: #f4f4f4; */
			}
		</style>
	</head>

	<body>
		<div id="jsmind_container"></div>
		<script src="./js/jsmind.js"></script>
		<script type="text/javascript" src="http://www.hqzj-ip.com/resource/js/jquery-1.10.2.min.js"></script>
		<script>
			var mind = {
				meta: {
					name: 'vec',
					author: 'hizzgdev@163.com',
					version: '0.2'
				},
				format: 'node_array',
				data: [{
						id: 'root',
						isroot: true,
						topic: '杭州湾中等职业学校'
					},
					{
						id: 'sub1',
						parentid: 'root',
						topic: '外国语学院'
					},
					{
						id: 'sub4',
						parentid: 'root',
						topic: '经济管理学院',
						direction: "left"
					},
					{
						id: 'sub41',
						parentid: 'sub4',
						topic: '世界经济学'
					},
					{
						id: 'sub42',
						parentid: 'sub4',
						topic: '金融学'
					},
					{
						id: 'sub5',
						parentid: 'root',
						topic: '物理学院',
						direction: "left"
					},
					{
						id: 'sub6',
						parentid: 'root',
						topic: '化工学院',
						direction: "left"
					},
					{
						id: 'sub13',
						parentid: 'sub1',
						topic: '日语'
					},
					{
						id: 'sub15',
						parentid: 'sub1',
						topic: '法语'
					},
					{
						id: 'sub14',
						parentid: 'sub1',
						topic: '俄语'
					},
					{
						id: 'sub2',
						parentid: 'root',
						topic: '机电一体化'
					},
					{
						id: 'sub21',
						parentid: 'sub2',
						topic: '车俩工程'
					},
					{
						id: 'sub22',
						parentid: 'sub2',
						topic: '机械工程'
					},
					{
						id: 'sub3',
						parentid: 'root',
						topic: '护理专业'
					}
				]
			};
			var options = {
				container: 'jsmind_container',
				editable: true,
				theme: 'greensea'
			};
			window.jm = jsMind.show(options, mind);
			// jm.add_node('sub2', 'sub23', 'new node', {'background-color': 'red'});
			// jm.set_node_color('sub21', 'green', '#ccc');
			document.addEventListener('UniAppJSBridgeReady', function() {
				uni.postMessage({
					data: {
						action: 'message'
					}
				});
				uni.getEnv(function(res) {
					console.log('当前环境：' + JSON.stringify(res));
					console.log('sid',getQuery('sid'))
				});
			});

			function getQuery(name) {
				// 正则：[找寻'&' + 'url参数名字' = '值' + '&']（'&'可以不存在）
				let reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
				let r = window.location.search.substr(1).match(reg);
				if (r != null) {
					// 对参数值进行解码
					return unescape(r[2]);
				}
				return null;
			}
			/* $.ajax({
				url: ADMIN_URL + "/meet/findAll",
				type: "GET",
				success: function(data) {
					$("#tableList").html(tab);
				},
				error: function(e) {
					console.log(e);
					alert('网络失败，请刷新页面后重试');
				}
			}); */
		</script>
	</body>

</html>
